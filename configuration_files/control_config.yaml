# Control algorithm configuration for excavator system
# Used by: ExcavatorController, PID controllers

rates:
  # Controller (IK) loop frequency in Hz
  control_hz: 100.0

pid:
  # PID controller gains for each joint
  # Joint 0: Slew (base rotation)
  joint0:
    kp: 4.5 #5.0
    ki: 0.250
    kd: 0.75

  # Joint 1: Boom (lift arm)
  joint1:
    kp: 10.0 #15
    ki: 1.0  # 0.5
    kd: 0.0

  # Joint 2: Arm (tilt)
  joint2:
    kp: 10.0 #7
    ki: 1.0 #0.5
    kd: 0.0 #0.15

  # Joint 3: Bucket (scoop)
  joint3:
    kp: 5.0 #5.0
    ki: 1.0 #0.50
    kd: 0.0 # 0.15

controller:
  # PID output limits (normalized -1.0 to 1.0)
  output_limits_min: -1.0
  output_limits_max: 1.0

  # Joint velocity limiting (applied at IK level for cleaner architecture)
  # Set to False to disable velocity limiting entirely
  enable_velocity_limiting: true

  # Per-joint velocity limits in rad/iter [slew, boom, arm, bucket]
  # Formula: rad/iter = degrees/sec / (57.3 * control_hz)
  # Examples at 100Hz:
  #   0.1 rad/iter = 5.73°/iter = 573°/s
  per_joint_max_velocity: [0.5, 1.0, 1.0, 1.0] #0.15
