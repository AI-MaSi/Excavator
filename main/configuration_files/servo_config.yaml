# servo control

# TODO:
# find "correct valve centers". Not irl centers,
# but equal distance between the beginnings of the flow (for some reason this is not in the middle haha).

CHANNEL_CONFIGS:

    pump:
        output_channel: 9
        pulse_min: 1000
        pulse_max: 1700
        idle: 0.45 # 0.40
        multiplier: 0.4

    lift_boom:
        output_channel: 3  # output pin on the servo board
        affects_pump: True # whether moving this servo affects the pump speed
        toggleable: False  # whether this servo can be toggled on/off via call
        center: 1566       # 1572 center pulse width in microseconds
        direction: 1       # pretty self-explanatory, -1 or 1
        pulse_min: 1340    # extend. This sets max velocity
        pulse_max: 1785    # retract. Max velocity in other direction
        deadzone: 1.5      # % of total range to ignore around center (=cuts out values)
        # Simple deadband - separate pos/neg offsets from center (us)
        deadband_us_pos: 145.0 #150.0 Try to match tese!
        deadband_us_neg: 145.0 #145.0
        # Dither - prevent valve stiction
        dither_enable: true # enable/disable dither
        dither_amp_us: 12.0 # amplitude in microseconds
        dither_hz: 25.0     # frequency in Hz

    tilt_boom:
        output_channel: 4
        affects_pump: True
        toggleable: False
        center: 1487 # 1487
        direction: 1
        pulse_min: 1220     # ret
        pulse_max: 1690     # ext
        deadzone: 1.5
        # Simple deadband - separate pos/neg
        deadband_us_pos: 140.0 #140.0
        deadband_us_neg: 140.0 #145.0
        # Dither settings
        dither_enable: true
        dither_amp_us: 12.0
        dither_hz: 25.0

    scoop:
        output_channel: 2
        affects_pump: True  # we can leave this true but use toggle_pump_variable(False) in the controller for static speed
        toggleable: False
        center: 1398        # 1413
        direction: -1
        pulse_min: 1175     # direction -1, so extend
        pulse_max: 1620     # retract
        deadzone: 1.5
        # Simple deadband - separate pos/neg
        deadband_us_pos: 131.0 #150.0
        deadband_us_neg: 131.0 #105.0
        dither_enable: true
        dither_amp_us: 12.0
        dither_hz: 25.0

    rotate:
        output_channel: 5
        affects_pump: False
        toggleable: False
        center: 1555
        direction: 1
        pulse_min: 1500 #1500
        pulse_max: 1617
        deadzone: 1.5
        deadband_us_pos: 40.0 #49.0
        deadband_us_neg: 40.0 #45.0
        dither_enable: true
        dither_amp_us: 12.0
        dither_hz: 20.0
